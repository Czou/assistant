var mod_pagespeed_Qr5hyKer7S = "var isIE=false;var isIE8=false;var isIE9=false;var isIE10=false;var validRule=window.validRule||{};validRule.isUrl=function(value){var rule=/^(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&amp;:/~\\+#]*[\\w\\-\\@?^=%&amp;/~\\+#])?$/;return rule.test(value);};var App=function(){var handleInit=function(){isIE=!!navigator.userAgent.match(/Trident/);isIE8=!!navigator.userAgent.match(/MSIE 8.0/);isIE9=!!navigator.userAgent.match(/MSIE 9.0/);isIE10=!!navigator.userAgent.match(/MSIE 10.0/);if(isIE){jQuery('html').addClass('ie');}\nif(isIE8){jQuery('html').addClass('ie8');}\nif(isIE9){jQuery('html').addClass('ie9');}\nif(isIE10){jQuery('html').addClass('ie10');}\nwindow.onscroll=function(){handlerScroll();}}\nfunction handleBootstrap(){jQuery('.carousel').carousel({interval:15000,pause:'hover'});jQuery('.tooltips').tooltip();jQuery('.popovers').popover();}\nfunction handleMisc(){jQuery('.top').click(function(){jQuery('html,body').animate({scrollTop:jQuery('body').offset().top},'slow');});}\nfunction handleUniform(){if(!jQuery().uniform){return;}\nvar test=$(\"input[type=checkbox]:not(.toggle), input[type=radio]:not(.toggle, .star)\");if(test.size()>0){test.each(function(){if($(this).parents(\".checker\").size()==0){$(this).show();$(this).uniform();}});}}\nvar lastPopedPopover;var handlePopovers=function(){jQuery('.popovers').popover();$(document).on('click.bs.popover.data-api',function(e){if(lastPopedPopover){lastPopedPopover.popover('hide');}});}\nvar handleFancybox=function(){if(!jQuery.fancybox){return;}\nif(jQuery(\".fancybox-button\").size()>0){jQuery(\".fancybox-button\").fancybox({groupAttr:'data-rel',prevEffect:'none',nextEffect:'none',closeBtn:true,helpers:{title:{type:'inside'}}});$('.fancybox-video').fancybox({type:'iframe'});}}\nvar addValidateRule=function(){if(jQuery.validator&&jQuery.validator.addMethod){jQuery.validator.addMethod(\"isMobile\",function(value,element){var length=value.length;var rule=/^1[3-8][0-9]\\d{4,8}$/;return this.optional(element)||(length==11&&rule.test(value));},\"请填写正确的手机号码\");jQuery.validator.addMethod(\"isQQ\",function(value,element){var rule=/^\\d{5,11}$/;return this.optional(element)||(rule.test(value));},\"请填写正确的QQ号码\");jQuery.validator.addMethod(\"isWxId\",function(value,element){var wxId=/[0-9a-zA-Z_-]{6,20}$/;return this.optional(element)||(wxId.test(value));},\"请填写正确的微信号\");jQuery.validator.addMethod(\"moreThan\",function(value,element,name){var elseVal=$('[name=\"'+name+'\"]').val();if(value<elseVal){return false;}\nreturn true;},\"请填写正确的值\");jQuery.validator.addMethod(\"isOriginalId\",function(value,element){if(value.lenth>30){return false;}\nvar rule=/^[a-zA-Z]+_[0-9a-zA-Z]+$/;return this.optional(element)||(rule.test(value));},\"请填写正确的原始ID\");}}\nvar handlePageMsg=function(){if(typeof MSG_URL==\"undefined\"){return;}\nif($('#msgNum').length<1){return;}\n$.getJSON(MSG_URL,function(data){var target=$('#msgNum');var num=data.msgNum;if(num>0){if(num>99){num=\"99+\";}\ntarget.text(num).show();}else{target.text(0).hide();}});}\nvar browserDetect=function(){var s1='<div id=\"browser\" class=\"alert alert-danger margin-bottom-0\"> <div class=\"container\"> 您正在使用的浏览器版本太老了，为了获取最好的系统体验，我们建议您升级您的浏览器到<a target=\"_blank\" rel=\"nofollow\" href=\"http://www.google.cn/intl/zh-CN/chrome/browser/\"><i class=\"icon url\"></i>Chrome最新版本（推荐）</a>，或者<a target=\"_blank\" rel=\"nofollow\" href=\"http://windows.microsoft.com/zh-cn/internet-explorer/download-ie\"><i class=\"icon url\"></i>Internet Explorer 8 以上版本</a> </div> </div>';var UA=navigator.userAgent.toUpperCase();if(UA.match(/MSIE [67].0/)!=null){if($('#browser').lenth==0){$('body').prepend(s1);}}}\nvar copyrightFIxBottom=function(){if($(\".copyright\").length>0){var topHeight=$('.header.navbar').outerHeight();if($('.header.navbar').length==0){topHeight=$('.header.signup-header').outerHeight();}\nvar bottomHeight=$('.copyright').outerHeight();var minHeight=$(window).height()-topHeight-bottomHeight-40;$(\".page-container\").css(\"min-height\",minHeight+'px');}}\nvar backToTop=function(){handlerScroll();$('#backToTop').click(function(){App.scrollTop();})}\nvar handlerScroll=function(){var scTop=$(window).scrollTop();var winHeight=$(window).height();if(scTop<winHeight){$('#backToTop').stop(true,true).fadeOut();}else{$('#backToTop').stop(true,true).fadeIn();}}\nreturn{init:function(){handleInit();handleBootstrap();handleIEFixes();handleMisc();handleFancybox();handlePopovers();addValidateRule();copyrightFIxBottom();handlePageMsg();browserDetect();backToTop();},initUniform:function(els){if(els){jQuery(els).each(function(){if($(this).parents(\".checker\").size()==0){$(this).show();$(this).uniform();}});}else{handleUniform();}},scrollTo:function(el,offeset){pos=el?el.offset().top:0;jQuery('html,body').animate({scrollTop:pos+(offeset?offeset:0)},'slow');},scrollTop:function(){App.scrollTo();},gridOption1:function(){$(function(){$('.grid-v1').mixitup();});},showLoading:function(target){var oldHtml=target.html();target.addClass('js-loading disabled');var fa=target.find('i.fa');if(fa.length==0){try{target.prepend('<i class=\"fa fa-spinner fa-loading\"></i> ');}catch(e){}}else{fa.attr('class','fa fa-spinner fa-loading');}\nreturn{revert:function(){target.html(oldHtml);target.removeClass('js-loading disabled');}};},cutStr:function(str,len){if(str&&str.length>len){str=str.substr(0,len-3)+'...';}\nreturn str;}};}();function isURL(str_url){var re=/[a-zA-z]+:\\/\\/[^\\s]*/;return re.test(str_url);}\nfunction getQueryString(name){var reg=new RegExp(\"(^|&)\"+name+\"=([^&]*)(&|$)\",\"i\");var r=window.location.search.substr(1).match(reg);if(r!=null)return decodeURIComponent(r[2]);return null;}\nfunction processAjaxData(answer,url){document.title=answer.pageTitle;window.history.pushState({\"html\":answer.html,\"pageTitle\":answer.pageTitle},\"\",url);}\nfunction goCheckAndGo(url){if(typeof CHECK_MOBILE_URL==\"undefined\"){console.log('goCheckAndGo 调用错误，未设置 CHECK_MOBILE_URL 全局变量');return;}\n$.get(CHECK_MOBILE_URL,function(data){if(data.error==0){if(data.res==0){User.bindMobile(function(){window.location.href=url;});}else{window.location.href=url;}}},'json');}\nfunction handleIEFixes(){if(isIE8||isIE9){jQuery('input[placeholder]:not(.placeholder-no-fix,:password), textarea[placeholder]:not(.placeholder-no-fix)').each(function(){var input=jQuery(this);if(input.val()==''&&input.attr(\"placeholder\")!=''){input.addClass(\"placeholder\").val(input.attr('placeholder'));}\ninput.focus(function(){if(input.val()==input.attr('placeholder')){input.val('');}});input.blur(function(){if(input.val()==''||input.val()==input.attr('placeholder')){input.val(input.attr('placeholder'));}});});}}";
var mod_pagespeed_sMwgd_yAf5 = "function renderPreview(data){var _d=new Date();var month=_d.getMonth();month=month+1;if(month<10){month='0'+month;}\nvar day=_d.getDate();if(day<10){day='0'+day;}\nvar nowTime=_d.getFullYear()+'/'+month+'/'+day+' '+_d.getHours()+':'+_d.getMinutes()+':'+_d.getSeconds();var defaultConfig={title:'',date:_d.getFullYear()+'-'+month+'-'+day,author:'',fileid:'',show_cover_pic:\"1\",content:'',digest:'',sourceurl:'',showUrL:true};var _data=$.extend({},true,defaultConfig,data);if(_data.fileid!=''){_data.fileid=SITE_UPLOAD+_data.fileid;}\nvar style='<style>html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}p{margin:0;}img{max-width:100%;}body{line-height:1.6;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:16px}body,h1,h2,h3,h4,h5,p,ul,ol,dl,dd,fieldset,textarea{margin:0}fieldset,legend,textarea,input,button{padding:0}button,input,select,textarea{font-family:inherit;font-size:100%;margin:0;*font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif}ul,ol{padding-left:0;list-style-type:none;list-style-position:inside}a img,fieldset{border:0}a{text-decoration:none}a{color:#607fa6}.rich_media_inner{padding:15px}.rich_media_title{line-height:24px;font-weight:700;font-size:20px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.rich_media_title .rich_media_meta{vertical-align:middle;position:relative}.rich_media_meta{display:inline-block;vertical-align:middle;font-weight:400;font-style:normal;margin-right:.5em;font-size:12px;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;max-width:none}.rich_media_meta.text{color:#8c8c8c}.rich_media_thumb{font-size:0;margin-top:18px}.rich_media_thumb img{width:100%}.rich_media_content{margin-top:18px;color:#3e3e3e;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.rich_media_content p{*zoom:1;min-height:1em;word-wrap:normal;white-space:pre-wrap;margin-top:1em;margin-bottom:1em}.rich_media_content *{max-width:100%!important;word-wrap:break-word!important;-webkit-box-sizing:border-box!important;box-sizing:border-box!important}.rich_media_content img{height:auto!important}.rich_media_tool{*zoom:1;padding:18px 0;font-size:14px}.rich_media_tool .media_tool_meta i,.rich_media_tool .media_tool_meta .icon_meta{vertical-align:0;position:relative;top:1px;margin-right:3px}.rich_media_tool .meta_primary{float:left;margin-right:14px}.rich_media_tool .meta_extra{float:right;margin-left:14px}.rich_media_tool .link_primary{color:#8c8c8c}.rich_media_extra{padding-top:0}@media screen and (min-width:1023px){.rich_media{width:740px;margin-left:auto;margin-right:auto}.rich_media_inner{padding:20px;background-color:#fff;border:1px solid #d9dadc;border-top-width:0}.rich_media_meta{max-width:none}.rich_media_content{min-height:350px}.rich_media_title{padding-bottom:10px;margin-bottom:5px;border-bottom:1px solid #e7e7eb}}.line_tips_wrp{margin-top:20px;text-align:center;border-top:1px dotted #a8a8a7;line-height:16px}.line_tips{display:inline-block;position:relative;top:-10px;padding:0 16px;font-size:14px;color:#cfcfcf;background-color:#f8f7f5;text-decoration:none}body{background-color:#f8f7f5;-webkit-touch-callout:none}h1,h2,h3,h4,h5,h6{font-weight:400;font-style:normal;font-size:100%}.icon_arrow_gray{width:7px}.icon_loading_white{width:16px}.icon_praise_gray{width:13px}.line_tips_wrp{margin-bottom:10px}.rich_media_meta.nickname{max-width:10em}.rich_media_extra{position:relative}.rich_media_extra .appmsg_banner{max-height:166px;width:100%}.rich_media_extra .ad_msg_mask{position:absolute;width:100%;height:100%;text-align:center;line-height:200px;background-color:#000;filter:alpha(opacity=20);-moz-opacity:.2;-khtml-opacity:.2;opacity:.2;left:0;top:0}.rich_media_content{font-size:16px}.rich_media_content p{margin-top:0;margin-bottom:0}.rich_media_tool .praise_num{display:inline-block;vertical-align:top;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;min-width:3em}.rich_media_tool .meta_praise{-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0;margin-right:0}.icon_praise_gray{background:transparent url(http://mmbiz.qpic.cn/mmbiz/ByCS3p9sHiam47qqib840uVr9ZH6ORLqhqmFibrmxWeY5icJ7ZE8Un8AibB18U19fCMUg9tibw8vgOdl4/0) no-repeat 0 0;width:13px;height:13px;vertical-align:middle;display:inline-block;-webkit-background-size:100% auto;background-size:100% auto}.icon_praise_gray.praised{background-position:0 -18px}.praised .icon_praise_gray{background-position:0 -18px}.rich_media_extra{padding-bottom:10px;font-size:14px}.rich_media_extra .extra_link{display:block}.rich_media_extra img{vertical-align:middle;margin-top:-3px}.rich_media_extra .icon_loading_white{margin-left:1em}.global_error_msg{padding:60px 30px}.global_error_msg strong{display:block}.global_error_msg.warn{color:#f00}.selectTdClass{background-color:#edf5fa!important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd!important}table{margin-bottom:10px;border-collapse:collapse;display:table;width:100%!important}td,th{word-wrap:break-word;word-break:break-all;padding:5px 10px;border:1px solid #DDD}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center}th{border-top:2px solid #BBB;background:#f7f7f7}.ue-table-interlace-color-single{background-color:#fcfcfc}.ue-table-interlace-color-double{background-color:#f7faff}td p{margin:0;padding:0}.res_iframe{width:100%;background-color:transparent;border:0}.vote_area{position:relative;display:block;margin:14px 0;white-space:normal!important}.vote_iframe{width:100%;height:100%;background-color:transparent;border:0}.rich_media_bottom{width:100%;margin-top:50px;}.rich_media_bottom a{color:#607fa6;text-decoration:none;float:left;}.rich_media_bottom span{color:gray;float:right;}</style>';var imgHtml='<div class=\"rich_media_thumb\" id=\"media\"> <img onerror=\"//this.parentNode.removeChild(this);\" src=\"'+_data.fileid+'\"> </div>';var digestLink='<div class=\"rich_media_bottom\"><a href=\"'+_data.sourceurl+'\" target=\"_self\">阅读原文</a><span>举报</span></div>'\nif(_data.fileid==\"\"||_data.show_cover_pic==\"0\"){imgHtml=\"\";}\nif(_data.sourceurl==\"\"){digestLink=\"\";}\nvar html='<div class=\"rich_media\"><div class=\"rich_media_inner\"> <h2 class=\"rich_media_title\" id=\"activity-name\"> '+_data.title+' </h2> <div class=\"rich_media_meta_list\"> <em id=\"post-date\" class=\"rich_media_meta text\">'+_data.date+'</em> <a class=\"rich_media_meta link nickname\" href=\"javascript:void(0);\" id=\"post-user\">'+_data.author+'</a> </div> <div id=\"page-content\"> <div id=\"img-content\"> '+imgHtml+' <div class=\"rich_media_content\" id=\"js_content\">'+_data.content+'<p>&nbsp;</p></div> </div> </div>'+digestLink+'</div> </div>';return style+html;}\nfunction showEditorDownload(){if(typeof USER_ID==\"undefined\"){return;}\nvar hasSawForGuest=$.cookie('client_download_win_guest');var hasSawForUser=$.cookie('client_download_win_'+USER_ID);if(!hasSawForGuest){if(USER_ID!=0){$.cookie('client_download_win_'+USER_ID,'true',{expires:9999});}\nif(!hasSawForUser){var html=$('#downloadWords').html();var modal=Win.confirm({title:'温馨提示',content:html,width:450,hideFooter:true});$.cookie('client_download_win_guest','true',{expires:1});}}}";
var mod_pagespeed_oZKvEqlvwG = "function Grid(config){var defaultConfig={container:'',pageSize:10,page:1,totalCount:1,paginationContainer:'',initData:false,url:'',param:'',emptyTips:'抱歉，没有找到符合条件的内容，再看看别的吧',loadFailedTips:'抱歉，加载数据失败，请稍后再试。',showCheck:false,rules:[],headerTemplate:false,bodyTemplate:false,template:{},initParam:{},storage:false,changeTh:true};this.handlers={};config=$.extend({},defaultConfig,config);if(config.container==''){alert('初始化Grid失败，Grid的container没设置！');return;}\nif(config.url==''){alert('初始化Grid失败，Grid的url没设置！');return;}\nif(config.headerTemplate){config.headerTemplate=_.template(config.headerTemplate);}\nif(config.bodyTemplate){config.bodyTemplate=_.template(config.bodyTemplate);}\nfor(var key in config.template){config.template[key]=_.template(config.template[key]);}\nthis.config=config;var container=$(config.container);if(config.headerTemplate==false){container.addClass('grid-list-wrap');}else{container.html('<thead>'+this._parseThead()+'</thead>');}\nif(config.param){config.initParam=config.param;}\nthis.loadStorage();if(config.initData){this.parseData(config.initData);}else{this.load();}\nthis.addEvent();if(config.paginationContainer!=''){this.addPaginationEvent();}\nreturn this;}\nGrid.prototype.addEvent=function(){var _this=this;var config=_this.config;var container=$(config.container);container.on('click','.checkbox-td',function(){var tr=$(this).parents('tr');var id=tr.attr('data-id');if(tr.hasClass('js-not-auto-check')){return;}\nif(tr.hasClass('checked')){_this.setCheck(id,0);}else{_this.setCheck(id,1);}});container.on('click','.checkAll',function(){var tr=$(this).parents('tr');if(tr.hasClass('checked')){_this.setAllCheck(0);}else{_this.setAllCheck(1);}});}\nGrid.prototype.updateConfig=function(config){this.config=$.extend({},this.config,config);this.config.page=1;this.load();}\nGrid.prototype.load=function(param,callback){var _this=this;var config=_this.config;var container=$(config.container);var colNums=config.rules.length;var loadingHtml='<div class=\"loading-spinner-wrap grid-loading-info\"><div class=\"progress progress-striped active\"><div class=\"progress-bar progress-bar-success\" style=\"width: 100%\"></div></div><div class=\"text-center\">加载数据中。。。</div></div>';if(colNums==0){colNums=container.find('thead > tr').children().length;}else{if(config.showCheck){colNums+=1;}}\nif(typeof param==\"object\"){config.param=param;}\nif(config.headerTemplate){if(container.find('tbody').length==0){container.find('thead').after('<tbody><tr><td colspan=\"'+colNums+'\">'+loadingHtml+'</td></tr></tbody>');}else{var tbody=container.find('tbody');var tbodyHeight=tbody.height();var tbodyWidth=tbody.width();var theadHeight=container.find('thead').height();tbody.find('td>.loading-spinner-wrap').remove();if(tbody.find('.loading-mask').length==0){tbody.find('td:eq(0)').append('<div style=\"position: absolute;width:'+tbodyWidth+'px;height:'+tbodyHeight+'px;top:'+theadHeight+'px;left:0; \" class=\"loading-mask\">'+loadingHtml+'</div>');if(tbody.children('tr').length==1){tbody.find('td:eq(0)').attr('height',tbodyHeight);}}}}else{if(container.find('.grid-loading-info').length==0){var tbodyHeight=container.height();var tbodyWidth=container.width();var html='<div style=\"position: absolute;width:'+tbodyWidth+'px;height:'+tbodyHeight+'px; top:0; left:0; \" class=\"loading-mask\">'+loadingHtml+'</div>';container.append(html);}}\nif(_this.loadGridAjax){_this.loadGridAjax.abort();}\n_this.loadGridAjax=$.ajax({type:\"get\",url:config.url,dataType:'json',data:_this._transParam(config.param),success:function(response){if(response.error&&response.error==1){var html='<tr class=\"col-align-center\"><td colspan=\"'+colNums+'\"><div class=\"grid-empty-info\">'+'<div class=\"info-icon-1\"></div>'+'<p>抱歉，加载数据出错，错误原因：</p>'+'<p>'+response.message+'</p>'+'</div></td></tr>';if(config.headerTemplate==false){html='<div class=\"grid-empty-info\">'+'<div class=\"info-icon-1\"></div>'+'<p>抱歉，加载数据出错，错误原因：</p>'+'<p>'+response.message+'</p>'+'</div>';container.html(html);}else{container.find('tbody').html(html);}\n$('.tooltip.in').remove();return;}\nif(config.changeTh){container.find('thead').html(_this._parseThead());}\nif(config.headerTemplate==false){container.html(_this._parseListHtml(response));}else{container.find('tbody').html(_this._parseTbody(response));}\n_this.parsePagination(response);$('.tooltips').tooltip();$('.popovers').popover();$('.tooltip.in').remove();if(config.callback){config.callback(response);}\nif(callback){callback(response);}},error:function(msg,type){if(type==\"abort\"){return;}\nif(type==\"error\"){return;}\nvar colNum=container.find('thead tr th').length;var html='<tr class=\"col-align-center\"><td colspan=\"'+colNum+'\"><div class=\"grid-empty-info\">'+'<div class=\"info-icon-1\"></div>'+'<p>'+config.loadFailedTips+'</p>'+'</div></td></tr>';container.find('tbody').html(html);$('.tooltip.in').remove();}});}\nGrid.prototype._transParam=function(param){var _this=this;var config=_this.config;if(typeof param==\"undefined\"||param==\"\"){param={};}\nparam=$.extend({page:config.page,pageSize:config.pageSize},config.initParam,param);var keys=_.keys(param);for(var i=0,len=keys.length;i<len;i++){var key=keys[i];if(typeof config.initParam[key]!=\"undefined\"){config.initParam[key]=param[key];}\nif(param[key]===\"\"){delete param[key];}}\nif(param.pageSize>=config.totalCount){param.page=1;config.page=1;}\nreturn param;}\nGrid.prototype.storage=function(){var _this=this;var config=_this.config;var storage=config.storage;if(storage==false){return;}\nvar param=_this._transParam(config.param);var _param=[];var keys=_.keys(param);for(var i=0,len=keys.length;i<len;i++){var key=keys[i];if(key=='order'){continue;}\n_param.push(key+'='+param[key]);}\n$.cookie(storage.key,_param.join('&'),{expires:7,path:storage.path});}\nGrid.prototype.loadStorage=function(){var _this=this;var config=_this.config;var storage=config.storage;if(storage==false){return;}\nvar cookie=$.cookie(storage.key);if(cookie==undefined){return;}\nvar data=paramToJson(cookie);if(typeof data.page!=\"undefined\"){config.page=data.page;delete data.page;}\nif(typeof data.pageSize!=\"undefined\"){config.pageSize=data.pageSize;delete data.pageSize;}\nif(typeof data.keyword!=\"undefined\"){delete data.keyword;}\nconfig.param=$.extend(true,{},data);setTimeout(function(){_this.trigger('afterLoadStorge',data);},100);};Grid.prototype.parseData=function(data){var _this=this;var config=_this.config;var container=$(config.container);var colNums=config.rules.length;if(config.showCheck){colNums+=1;}\nvar html=[];html.push('<tbody>');html.push(this._parseTbody(data));html.push('</tbody>');container.find('thead').after(html.join(''));this.parsePagination(data);if(config.callback){config.callback(data);}}\nGrid.prototype._parseThead=function(){var _this=this;var config=_this.config;var thead=[];if(config.headerTemplate){thead.push(config.headerTemplate());}else{thead.push('<tr>');if(config.showCheck){thead.push('<th class=\"checkbox-td checkAll\" width=\"30\"><i class=\"fa fa-square-o\"></i></th>');}\nfor(var i=0,len=config.rules.length;i<len;i++){var rule=config.rules[i];var width=\"\";if(typeof rule.width!=\"undefined\"){width=' width=\"'+rule.width+'\"';}\nthead.push('<th'+width+'>'+rule.title+'</th>');}\nthead.push('</tr>');}\nreturn thead.join('');}\nGrid.prototype._parseTbody=function(data){var _this=this;var config=_this.config;var tbody=[];for(var j=0,len2=data.data.length;j<len2;j++){var item=data.data[j];item._data_index=j;if(item==false){continue;}\nif(config.headerTemplate){tbody.push(config.bodyTemplate(item));}else{tbody.push('<tr id=\"gItem'+item.id+'\" data-id=\"'+item.id+'\">');if(config.showCheck){tbody.push('<td class=\"checkbox-td\"><i class=\"fa fa-square-o\"></i></td>');}\nArray.prototype.push.apply(tbody,_this._parseTbodyTdHtml(item));tbody.push('</tr>');}}\nreturn tbody.join('');}\nGrid.prototype._parseListHtml=function(data){var _this=this;var config=_this.config;var listHtml=[];for(var j=0,len2=data.data.length;j<len2;j++){var item=data.data[j];if(item==false){continue;}\nlistHtml.push(_this.config.bodyTemplate(item));}\nif(listHtml.length==0){listHtml.push('<div class=\"grid-empty-info\"><div class=\"info-icon-1\"></div><p>'+config.emptyTips+'</p></div>');}\nreturn listHtml.join('');}\nGrid.prototype._parseTbodyTdHtml=function(data){var _this=this;var config=_this.config;var array=[];for(var i=0,len=config.rules.length;i<len;i++){var field=config.rules[i].field;if(typeof config.template[field]!=\"undefined\"){array.push(config.template[field](data));}else{array.push('<td>'+data[field]+'</td>');}}\nreturn array;}\nGrid.prototype.setCheck=function(id,status){var _this=this;var config=_this.config;var container=$(config.container);var tr=container.find('#gItem'+id+'');var td=tr.find('.checkbox-td');if(td.hasClass('disabled')){return;}\nif(status==0){tr.removeClass('checked');td.find('i.fa').addClass('fa-square-o').removeClass('fa-check-square-o');}else{tr.addClass('checked');td.find('i.fa').addClass('fa-check-square-o').removeClass('fa-square-o');}}\nGrid.prototype.setAllCheck=function(status){var _this=this;var config=_this.config;var container=$(config.container);var trs=container.find('thead tr,tbody tr');trs.each(function(){var tr=$(this);var td=tr.find('.checkbox-td');if(td.hasClass('disabled')){}else{if(status==0){tr.removeClass('checked');td.find('.fa-check-square-o').addClass('fa-square-o').removeClass('fa-check-square-o');}else{tr.addClass('checked');td.find('.fa-square-o').addClass('fa-check-square-o').removeClass('fa-square-o');}}});}\nGrid.prototype.getAllChecked=function(){var _this=this;var config=_this.config;var container=$(config.container);var ids=[];container.find('tbody .checked').each(function(){ids.push($(this).attr('data-id'));});return ids;}\nGrid.prototype.parsePagination=function(data){var _this=this;var config=_this.config;var container=$(config.paginationContainer);var totalPage=Math.ceil(data.totalCount/config.pageSize);var page=config.page;var html=[];_this.config.totalPage=totalPage;_this.config.totalCount=data.totalCount;html.push('<div class=\"pull-right grid-pagination-info\"> 到第 <input class=\"pagination-page-num js-only-num\" value=\"'+page+'\" type=\"text\"/> 页 <button type=\"button\" class=\"btn btn-sm js-go-page grid-pagination-btn\">确定</button> 共 <span class=\"pageTotalNum\">'+totalPage+'</span> 页，'+data.totalCount+'条记录 </div>');html.push('<ul class=\"pagination account-list-pagination pull-right\">');html.push('<li class=\"jsPrevPage\"><a href=\"javascript:void(0);\">上一页</a> </li>');for(var i=1;i<=totalPage;i++){var j=page-i;if(j>-6&&j<5){_addLi(i);continue;}\nif(page<5&&i<11){_addLi(i);continue;}\nif(page>(totalPage-5)&&i>(totalPage-10)){_addLi(i);}}\nhtml.push('<li class=\"jsNextPage\"><a href=\"javascript:void(0);\">下一页</a> </li>');html.push('</ul>');html=$(html.join(''));container.html(html);container.addClass('grid-pagination-wrap clearfix');if(totalPage<=1){container.hide();container.addClass('hide').removeClass('show');}else{container.show();container.addClass('show').removeClass('hide');}\nif(data.data.length==0){var $table=$(_this.config.container);var tdNum=$table.find('thead > tr > th').length;var html='<tr class=\"col-align-center\"><td colspan=\"'+tdNum+'\"><div class=\"grid-empty-info\">'+'<div class=\"info-icon-1\"></div>'+'<p>'+config.emptyTips+'</p>'+'</div></td></tr>';$table.find('tbody').html(html);}\nfunction _addLi(i){html.push('<li'+(i==page?' class=\"active\"':'')+'><a href=\"javascript:void(0);\">'+i+'</a></li>');}}\nGrid.prototype.addPaginationEvent=function(){var _this=this;var config=_this.config;var container=$(config.paginationContainer);container.on('click','.jsNextPage',function(){_this.goNextPage();});container.on('click','.jsPrevPage',function(){_this.goPrevPage()});container.on('click','.pagination li',function(){var num=parseInt($(this).text(),10);if(isNaN(num)){return;}\nif($(this).hasClass('active')){return;}\n_this.goPage(num);});container.on('click','.js-go-page',function(){var page=container.find('.pagination-page-num').val();var result=_this.goPage(page);var totalPage=_this.config.totalPage;if(result===false){toastr.error('请输入一个小于或等于 '+totalPage+' 的数字','提示！');container.find('.pagination-page-num').select();}\nelse if(\"min\"==result){toastr.error('请输入一个大于或等于1的数字','提示！');}\nelse if(\"num\"==result){toastr.error('请输入数字','提示！');}});container.on('keypress','.pagination-page-num',function(e){if(e.keyCode==13){container.find('.js-go-page').click();}});}\nGrid.prototype.goPage=function(num){var _this=this;num=parseInt(num);if(num>this.config.totalPage){return false;}\nelse if(num<1){return\"min\";}\nelse if(/^[1-9][0-9]*$/.test(num)!=true){return\"num\";}\ndelete this.config.param.page;this.config.page=num;this.load('',function(){var container=_this.config.container;var offsetTop=container.offset().top;var nowScrollTop=$(window).scrollTop();if(nowScrollTop>offsetTop){}});}\nGrid.prototype.goPrevPage=function(){var page=this.config.page;if(page==1){return;}\nthis.goPage(page-1);}\nGrid.prototype.goNextPage=function(){var totalPage=this.config.totalPage;var page=this.config.page;if(page==totalPage){return;}\nthis.goPage(page+1);}\nGrid.prototype.on=function(type,handler){if(typeof this.handlers[type]==\"undefined\"){this.handlers[type]=[];}\nthis.handlers[type].push(handler);};Grid.prototype.trigger=function(type,param){if(this.handlers[type]instanceof Array){var handlers=this.handlers[type];for(var i=0,len=handlers.length;i<len;i++){handlers[i](param);}}};function Filter(target,data,showNum){this.handlers={};this.target=$('#'+target);this.data=data;this.customData={};this.param={};this.showNum=showNum;this.init();this.addEvent();}\nFilter.prototype.init=function(){var data=this.data;var target=this.target;var html=['<div id=\"hasSelectedWrap\" style=\"display: none;\" class=\"filter-box filter-top clearfix\"><div class=\"pull-left filter-title\"> 已选条件： </div><div id=\"hasSelected\"></div></div>'];for(var i=0,len=data.length;i<len;i++){var obj=data[i];if(typeof this.showNum!=\"undefined\"){if(i>=this.showNum){html.push(this._parseHtml(obj,true));continue;}}\nhtml.push(this._parseHtml(obj));}\nif(typeof this.showNum!=\"undefined\"){html.push('<div class=\"text-center extraToggle-wrap\"><button type=\"button\" class=\"btn blue extraToggle\"><i class=\"fa fa-angle-double-down\"></i> 显示更多选项</div>');}\ntarget.html(html.join(''));};Filter.prototype._parseHtml=function(data,isHide){var html=['<div'+(isHide?' style=\"display:none;\"':'')+' data-key=\"'+data.key[0].id+'\" class=\"filter-box'+(data.multi==true?' filter-multi':' filter-single')+'\">','<div class=\"pull-left filter-title\">'];if(data.key.length>1){html.push('<select class=\"form-control form-control-inline js-filter-key\">');for(var i=0,len=data.key.length;i<len;i++){var obj=data.key[i];html.push('<option value=\"'+obj.id+'\">'+obj.name+'</option>');}\nhtml.push('</select> ：');}else{html.push('<span data-id=\"'+data.key[0].id+'\" class=\"js-filter-key\">'+data.key[0].name+'</span>：');}\nhtml.push('</div><div class=\"filter-options\"><span data-type=\"all\" class=\"btn-primary filter-option-item js-options-all js-option\">不限</span>');for(var i=0,len=data.value.length;i<len;i++){var obj1=data.value[i];html.push('<span data-type=\"'+obj1.id+'\" class=\"btn-default filter-option-item js-option\">'+obj1.name+'</span>');}\nhtml.push('</div>');if(data.more==true){html.push('<div class=\"filter-more\"><span class=\"btn btn-default btn-sm\">更多 <i class=\"fa fa-angle-double-down\"></i></span></div>');}\nif(data.between!=false){html.push('<div class=\"filter-custom\"> <input class=\"value form-control js-only-num\" type=\"text\" /> - <input class=\"value form-control js-only-num\" type=\"text\" /> <span class=\"f-unit\">'+data.between+'</span> <span class=\"btn blue btn-sm sure\">确定</span> </div>');}\nhtml.push('</div>');return html.join('');}\nFilter.prototype.addEvent=function(){var _this=this;var target=this.target;target.on('keyup','.js-only-num',function(){var val=$(this).val();if(val=='*'){}else{if(val.match(/\\D/g)!=null){$(this).val(val.replace(/\\D/g,''));}}});target.on('click','.filter-multi .js-option',function(){var val=$(this).data('type');var isSel=$(this).hasClass('btn-primary');var parent=$(this).parent('.filter-options');var keyObj=$(this).parents('.filter-box').find('.js-filter-key');var key=keyObj.data('id');if(typeof key==\"undefined\"){key=keyObj.val();}\nif(val=='all'){if(key==\"area\"){$('#hasSelected [data-key=\"area1\"] .badge,#hasSelected [data-key=\"area2\"] .badge').click()\nreturn;}\n$(this).siblings('.btn-primary').removeClass('btn-primary').addClass('btn-default');$(this).removeClass('btn-default').addClass('btn-primary');}else{$(this).siblings('.js-options-all').removeClass('btn-primary').addClass('btn-default');if(key=='area'){$(this).removeClass('btn-default').addClass('btn-primary');handleChooseArea();return;}\nif(isSel){$(this).removeClass('btn-primary').addClass('btn-default');}else{$(this).removeClass('btn-default').addClass('btn-primary');}\nvar temp=[];parent.find('.btn-primary').each(function(){temp.push($(this).data('type'));});val=temp.join(',');if(temp.length==0){val='all';$(this).siblings('.js-options-all').removeClass('btn-default').addClass('btn-primary');}}\n$(this).parents('.filter-box').find('.filter-custom').removeClass('focus');$(this).parents('.filter-box').find('.filter-custom .value').val('');delete _this.customData[key];_this.updateParam(key,val);});target.on('click','.filter-single .js-option',function(){var val=$(this).data('type');var isSel=$(this).hasClass('btn-primary');var keyObj=$(this).parents('.filter-box').find('.js-filter-key');var key=keyObj.data('id');if(typeof key==\"undefined\"){key=keyObj.val();}\nif(val=='all'){$(this).siblings('.btn-primary').removeClass('btn-primary').addClass('btn-default');$(this).removeClass('btn-default').addClass('btn-primary');}else{$(this).siblings('.btn-primary').removeClass('btn-primary').addClass('btn-default');if(isSel){$(this).removeClass('btn-primary').addClass('btn-default');val=\"all\";$(this).siblings('.js-options-all').removeClass('btn-default').addClass('btn-primary');}else{$(this).removeClass('btn-default').addClass('btn-primary');}}\n$(this).parents('.filter-box').find('.filter-custom').removeClass('focus');$(this).parents('.filter-box').find('.filter-custom .value').val('');delete _this.customData[key];_this.updateParam(key,val);});target.on('change','select.js-filter-key',function(e){var key=$(this).val();var box=$(this).parents('.filter-box');box.attr('data-key',key);var otherKey=[];$(this).find('option:not(:selected)').each(function(){otherKey.push($(this).val());});var val=_this.getValue(key);_this.updateParam(key,val,otherKey);});target.on('click','#hasSelected .badge',function(e){var parent=$(this).parent();var key=parent.data('key');var value=parent.data('value');if(key==\"area1\"||key==\"area2\"){delete _this.customData['area1'];delete _this.customData['area2'];delete _this.param['area1'];delete _this.param['area2'];var areaBtn=target.find('[data-type=\"choose_area\"]');areaBtn.removeClass('btn-primary').addClass('btn-default');areaBtn.siblings('.js-options-all').removeClass('btn-default').addClass('btn-primary');$('#tdistWrap :checkbox').attr('checked',false);$('#tdistWrap .js-has-sub').removeClass('js-has-sub');$('#tdistWrap .js-sub-all').removeClass('js-has-sub');$('#tdistWrap .sub-info').text('');parent.remove();_this.trigger('change');if($('#hasSelected').children().length>0){$('#hasSelectedWrap').slideDown(300);}else{$('#hasSelectedWrap').slideUp(300);}\nreturn;}\nvar btn=target.find('[data-key=\"'+key+'\"]').find('[data-type=\"'+value+'\"]');if(btn.length==0){parent.remove();if($('#hasSelected').find('.btn').length==0){$('#hasSelectedWrap').slideUp();}\ndelete _this.customData[key];var thisBox=$('[data-key=\"'+key+'\"]');thisBox.find('.js-options-all').click();thisBox.find('.value').val('');thisBox.find('.filter-custom').removeClass('focus');}else{btn.click();}});target.on('focus','.filter-custom .value',function(){$(this).parent('.filter-custom').addClass('focus');})\ntarget.on('blur','.filter-custom .value',function(){var par=$(this).parent('.filter-custom');var value='';par.find('.value').each(function(){value+=$(this).val()});if(value==''){par.removeClass('focus');}});target.on('click','.filter-custom .sure',function(){var parent=$(this).parent();var box=$(this).parents('.filter-box');var key=box.attr('data-key');var keyDiv=box.find('.js-filter-key');box.find('.btn-primary').removeClass('btn-primary').addClass('btn-default');if(keyDiv[0].nodeName==\"SELECT\"){var other=[];keyDiv.find('option:not(:selected)').each(function(){other.push($(this).val());});}\nvar unit=parent.find('.f-unit').text();var values=[];parent.find('.value').each(function(){var val=$.trim($(this).val());if(val!=''){val=parseFloat(val);}\nvalues.push(val);});if(values[0]==\"\"&&values[1]==\"\"){parent.find('.value:eq(0)').focus();return;}\nif(values[1]!=''&&values[1]!='*'&&values[0]>values[1]){parent.find('.value:eq(1)').focus();return;}\nif(values[0]==\"\"&&values[1]!=''){values[0]=0;}\nif(values[1]==''){values[1]='*';}\nvar id=values.join('to');var name=values.join('-')+unit;_this.customData[key]={keyId:key,valueId:id,valueName:name};_this.updateParam(key,id,other);});target.on('click','.extraToggle',function(){var type=$(this).hasClass('js-show');var num=_this.showNum;if(type){target.children('.filter-box:gt('+num+')').each(function(){$(this).slideUp(300);});$(this).html('<i class=\"fa fa-angle-double-down\"></i> 显示更多选项');}else{target.children('.filter-box:gt('+num+')').slideDown(300);$(this).html('<i class=\"fa fa-angle-double-up\"></i> 收起');}\n$(this).toggleClass('js-show');});function handleChooseArea(val,isSel){var tdist_target=$('#tdistWrap');var modal=Win.open({title:'设定区域',width:620,content:tdist_target.html(),yesFunc:function(){var html=modal.find('.modal-body').html();$('#tdistWrap').html(html);var lev1Id=[];var lev1Text=[];var lev2Id=[];var lev2Text=[];modal.find('.js-sub-all input[data-type=\"lev1\"]').each(function(){lev1Id.push($(this).val());lev1Text.push($(this).attr('data-text'));});modal.find('.js-lev1').not('.js-sub-all').find('.js-lev2 :checked').each(function(){lev2Id.push($(this).val());lev2Text.push($(this).attr('data-text'));});_this.customData.area1={keyId:\"area1\",valueId:lev1Id.join(','),valueName:lev1Text.join(',')}\n_this.customData.area2={keyId:\"area2\",valueId:lev2Id.join(','),valueName:lev2Text.join(',')}\nif(lev1Id.length>0||lev2Id.length>0){_this.updateParam(['area1','area2'],[lev1Id.join(','),lev2Id.join(',')]);}else{delete _this.customData.area1;delete _this.customData.area2;}}});modal.on('hidden.bs.modal',function(){if(typeof _this.customData.area1==\"undefined\"){var _wrap=target.find('[data-key=\"area\"]');_wrap.find('.btn-primary').removeClass('btn-primary').addClass('btn-default');_wrap.find('.js-options-all').removeClass('btn-default').addClass('btn-primary');}})}}\nFilter.prototype.updateResult=function(){var _this=this;var param=this.param;var keys=_.keys(param);var html=[];var hasAddArea=false;var target=this.target;var needShowHideArea=false;for(var i=0;i<keys.length;i++){var key=keys[i];var value=param[key]+'';if(value==\"\"){continue;}\nvar box=$('.filter-box[data-key=\"'+key+'\"]');if(box.length==0){box=$('.filter-box[data-key*=\"'+(key.substr(0,key.length-1))+'\"]');box.find('select').val(key);box.attr('data-key',key);}\nif(key==\"area1\"||key==\"area2\"){if(hasAddArea){continue;}\nhasAddArea=true;if(typeof _this.customData.area1==\"undefined\"){if(typeof param.area1!=\"undefined\"){var _ids=param['area1'].split(',');var _texts=[];for(var j=0,len=_ids.length;j<len;j++){var _text=_ids[j];var checkBox=$('input[value=\"'+_text+'\"]');var _thisLi=checkBox.parent().parent();var totalNum=_thisLi.find('.js-lev2').length;_thisLi.find(':checkbox').attr('checked',true);_thisLi.addClass('js-has-sub js-sub-all');_thisLi.find('.sub-info').text('('+totalNum+'/'+totalNum+')');_text=tdist[_text][0];_texts.push(_text);}\n_texts=_texts.join(',');_this.customData.area1={keyId:\"area1\",valueId:value,valueName:_texts}}else{_this.customData.area1={keyId:\"area1\",valueId:'',valueName:''}}}\nif(typeof _this.customData.area2==\"undefined\"){if(typeof param.area2!=\"undefined\"){var _ids=param['area2'].split(',');var _texts=[];for(var j=0,len=_ids.length;j<len;j++){var _text=_ids[j];var checkBox=$('input[value=\"'+_text+'\"]');var _thisLi=checkBox.closest('.js-lev1');var totalNum=_thisLi.find('.js-lev2').length;var checkedNum=_thisLi.find(':checked').length;checkBox.attr('checked',true);_thisLi.addClass('js-has-sub');_thisLi.find('.sub-info').text('('+checkedNum+'/'+totalNum+')');_text=tdist[_text][0];_texts.push(_text);}\n_texts=_texts.join('，');_this.customData.area2={keyId:\"area2\",valueId:value,valueName:_texts}}else{_this.customData.area2={keyId:\"area2\",valueId:'',valueName:''}}}\nvar areaText=_this.customData.area1.valueName;if(areaText.length>0&&_this.customData.area2.valueName.length>0){areaText+=\"，\"+_this.customData.area2.valueName;}else{areaText+=_this.customData.area2.valueName;}\nhtml.push('<span title=\"'+areaText+'\" data-key=\"'+key+'\" class=\"btn btn-primary btn-sm\"><span class=\"filter-item-text\">'+areaText+'</span><span class=\"badge\"><i class=\"fa fa-times\"></i></span></span>');needShowHideArea=true;var areaBtn=$('[data-type=\"choose_area\"]');areaBtn.addClass('btn-primary').removeClass('btn-default');areaBtn.siblings().addClass('btn-default').removeClass('btn-primary');continue;}\nvalue=value.split(',');box.find('.btn-primary').removeClass('btn-primary').addClass('btn-default');var textHtml=[];for(var j=0,len2=value.length;j<len2;j++){var valuej=value[j];var text=_this.getTextByValue(key,valuej);if(text==\"\"){continue;}\nvar targetBtn=box.find('[data-type=\"'+valuej+'\"]');targetBtn.removeClass('btn-default').addClass('btn-primary');if(targetBtn.length==0){var custom=box.find('.filter-custom');custom.addClass('focus');var _temp=valuej.split('to');box.find('.value').eq(0).val(_temp[0]);box.find('.value').eq(1).val(_temp[1]);if(custom.is(':visible')==false){needShowHideArea=true;}}else{if(targetBtn.is(':visible')==false){needShowHideArea=true;}}\ntextHtml.push(text);}\nhtml.push('<span title=\"'+textHtml.join('，')+'\" data-key=\"'+key+'\" data-value=\"'+value+'\" class=\"btn btn-primary btn-sm\"><span class=\"filter-item-text\"><em>'+_this.getKeyTextById(key)+'</em>：'+textHtml.join('，')+'</span><span class=\"badge\"><i class=\"fa fa-times\"></i></span></span>');}\n$('#hasSelected').html(html.join(''));if(html.length>0){$('#hasSelectedWrap').slideDown(300);}else{$('#hasSelectedWrap').slideUp(300);}\nif(needShowHideArea){target.children('.filter-box:gt('+_this.showNum+')').each(function(){$(this).show();});target.find('.extraToggle').addClass('js-show').html('<i class=\"fa fa-angle-double-up\"></i> 收起');}}\nFilter.prototype.getTextByValue=function(key,value){var data=this.data;var text=false;if(typeof this.customData[key]!=\"undefined\"){return this.customData[key].valueName;}\nfor(var i=0,len=data.length;i<len;i++){var obj=data[i];var keys=obj.key;for(var j=0,len2=keys.length;j<len2;j++){var _key=keys[j].id;if(key==_key){var values=obj.value;for(var k=0,len3=values.length;k<len3;k++){var _value=values[k].id;if(value==_value){text=values[k].name;return text;}}\nif(obj.between!==false){text=value.replace('to','-')+obj.between;}}}}\nreturn text;}\nFilter.prototype.getKeyTextById=function(key){var data=this.data;var text=false;for(var i=0,len=data.length;i<len;i++){var obj=data[i];var keys=obj.key;for(var j=0,len2=keys.length;j<len2;j++){var _key=keys[j].id;if(key==_key){text=keys[j].name;return text;}}}\nreturn text;}\nFilter.prototype.updateParam=function(key,value,other){var param=this.param;var oldParam=$.extend(true,{},param);if(other instanceof Array){for(var i=0,len=other.length;i<len;i++){var _key=other[i];if(typeof param[_key]!=\"undefined\"){delete param[_key];}}}\nif(key instanceof Array){for(var i=0,len=key.length;i<len;i++){var ki=key[i];var vi=value[i];if(vi==\"all\"){if(typeof param[ki]!=\"undefined\"){delete param[ki];}}else{param[ki]=vi;}}}else{if(value==\"all\"){if(typeof param[key]!=\"undefined\"){delete param[key];}}else{param[key]=value;}}\nthis.updateResult();if(_.keys(param).length>0||_.keys(oldParam).length>0){this.trigger('change');}}\nFilter.prototype.getValue=function(key){var target=this.target;var box=target.find('[data-key=\"'+key+'\"]');if(box.length==0){return false;}\nvar keyObj=box.find('.js-filter-key');var _key=keyObj.data('id');if(typeof _key==\"undefined\"){_key=keyObj.val();}\nvar temp=[];box.find('.btn-primary').each(function(){temp.push($(this).data('type'));});var val=temp.join(',');if(temp.length==0){val='all';$(this).siblings('.js-options-all').removeClass('btn-default').addClass('btn-primary');}\nreturn val;}\nFilter.prototype.on=function(type,handler){if(typeof this.handlers[type]==\"undefined\"){this.handlers[type]=[];}\nthis.handlers[type].push(handler);};Filter.prototype.trigger=function(type){if(this.handlers[type]instanceof Array){var handlers=this.handlers[type];for(var i=0,len=handlers.length;i<len;i++){handlers[i]();}}};function paramToJson(str){var array=str.split('&');var result={};for(var i=0,len=array.length;i<len;i++){var obj=array[i].split('=');result[obj[0]]=obj[1];}\nreturn result;}";
var mod_pagespeed_PwI8cQo6ON = "(function(factory){if(typeof define==='function'&&define.amd)\ndefine(['jquery'],factory);else\nfactory(jQuery);}(function($){var Wookmark,defaultOptions,__bind;__bind=function(fn,me){return function(){return fn.apply(me,arguments);};};defaultOptions={align:'center',autoResize:false,comparator:null,container:$('body'),direction:undefined,ignoreInactiveItems:true,itemWidth:0,fillEmptySpace:false,flexibleWidth:0,offset:2,outerOffset:0,onLayoutChanged:undefined,possibleFilters:[],resizeDelay:50,verticalOffset:undefined};var executeNextFrame=window.requestAnimationFrame||function(callback){callback();},$window=$(window);function bulkUpdateCSS(data){executeNextFrame(function(){var i,item;for(i=0;i<data.length;i++){item=data[i];item.obj.css(item.css);}});}\nfunction cleanFilterName(filterName){return $.trim(filterName).toLowerCase();}\nWookmark=(function(){function Wookmark(handler,options){this.handler=handler;this.columns=this.containerWidth=this.resizeTimer=null;this.activeItemCount=0;this.itemHeightsDirty=true;this.placeholders=[];$.extend(true,this,defaultOptions,options);this.verticalOffset=this.verticalOffset||this.offset;this.update=__bind(this.update,this);this.onResize=__bind(this.onResize,this);this.onRefresh=__bind(this.onRefresh,this);this.getItemWidth=__bind(this.getItemWidth,this);this.layout=__bind(this.layout,this);this.layoutFull=__bind(this.layoutFull,this);this.layoutColumns=__bind(this.layoutColumns,this);this.filter=__bind(this.filter,this);this.clear=__bind(this.clear,this);this.getActiveItems=__bind(this.getActiveItems,this);this.refreshPlaceholders=__bind(this.refreshPlaceholders,this);this.sortElements=__bind(this.sortElements,this);this.updateFilterClasses=__bind(this.updateFilterClasses,this);this.updateFilterClasses();if(this.autoResize)\n$window.bind('resize.wookmark',this.onResize);this.container.bind('refreshWookmark',this.onRefresh);}\nWookmark.prototype.updateFilterClasses=function(){var i=0,j=0,k=0,filterClasses={},itemFilterClasses,$item,filterClass,possibleFilters=this.possibleFilters,possibleFilter;for(;i<this.handler.length;i++){$item=this.handler.eq(i);itemFilterClasses=$item.data('filterClass');if(typeof itemFilterClasses=='object'&&itemFilterClasses.length>0){for(j=0;j<itemFilterClasses.length;j++){filterClass=cleanFilterName(itemFilterClasses[j]);if(typeof(filterClasses[filterClass])==='undefined'){filterClasses[filterClass]=[];}\nfilterClasses[filterClass].push($item[0]);}}}\nfor(;k<possibleFilters.length;k++){possibleFilter=cleanFilterName(possibleFilters[k]);if(!(possibleFilter in filterClasses)){filterClasses[possibleFilter]=[];}}\nthis.filterClasses=filterClasses;};Wookmark.prototype.update=function(options){this.itemHeightsDirty=true;$.extend(true,this,options);};Wookmark.prototype.onResize=function(){clearTimeout(this.resizeTimer);this.itemHeightsDirty=this.flexibleWidth!==0;this.resizeTimer=setTimeout(this.layout,this.resizeDelay);};Wookmark.prototype.onRefresh=function(){this.itemHeightsDirty=true;this.layout();};Wookmark.prototype.filter=function(filters,mode,dryRun){var activeFilters=[],activeFiltersLength,activeItems=$(),i,j,k,filter;filters=filters||[];mode=mode||'or';dryRun=dryRun||false;if(filters.length){for(i=0;i<filters.length;i++){filter=cleanFilterName(filters[i]);if(filter in this.filterClasses){activeFilters.push(this.filterClasses[filter]);}}\nactiveFiltersLength=activeFilters.length;if(mode=='or'||activeFiltersLength==1){for(i=0;i<activeFiltersLength;i++){activeItems=activeItems.add(activeFilters[i]);}}else if(mode=='and'){var shortestFilter=activeFilters[0],itemValid=true,foundInFilter,currentItem,currentFilter;for(i=1;i<activeFiltersLength;i++){if(activeFilters[i].length<shortestFilter.length){shortestFilter=activeFilters[i];}}\nshortestFilter=shortestFilter||[];for(i=0;i<shortestFilter.length;i++){currentItem=shortestFilter[i];itemValid=true;for(j=0;j<activeFilters.length&&itemValid;j++){currentFilter=activeFilters[j];if(shortestFilter==currentFilter)continue;for(k=0,foundInFilter=false;k<currentFilter.length&&!foundInFilter;k++){foundInFilter=currentFilter[k]==currentItem;}\nitemValid&=foundInFilter;}\nif(itemValid)\nactiveItems.push(shortestFilter[i]);}}\nif(!dryRun)\nthis.handler.not(activeItems).addClass('inactive');}else{activeItems=this.handler;}\nif(!dryRun){activeItems.removeClass('inactive');this.columns=null;this.layout();}\nreturn activeItems;};Wookmark.prototype.refreshPlaceholders=function(columnWidth,sideOffset){var i=this.placeholders.length,$placeholder,$lastColumnItem,columnsLength=this.columns.length,column,height,top,innerOffset,containerHeight=this.container.innerHeight();for(;i<columnsLength;i++){$placeholder=$('<div class=\"wookmark-placeholder\"/>').appendTo(this.container);this.placeholders.push($placeholder);}\ninnerOffset=this.offset+parseInt(this.placeholders[0].css('borderLeftWidth'),10)*2;for(i=0;i<this.placeholders.length;i++){$placeholder=this.placeholders[i];column=this.columns[i];if(i>=columnsLength||!column[column.length-1]){$placeholder.css('display','none');}else{$lastColumnItem=column[column.length-1];if(!$lastColumnItem)continue;top=$lastColumnItem.data('wookmark-top')+$lastColumnItem.data('wookmark-height')+this.verticalOffset;height=containerHeight-top-innerOffset;$placeholder.css({position:'absolute',display:height>0?'block':'none',left:i*columnWidth+sideOffset,top:top,width:columnWidth-innerOffset,height:height});}}};Wookmark.prototype.getActiveItems=function(){return this.ignoreInactiveItems?this.handler.not('.inactive'):this.handler;};Wookmark.prototype.getItemWidth=function(){var itemWidth=this.itemWidth,innerWidth=this.container.width()-2*this.outerOffset,firstElement=this.handler.eq(0),flexibleWidth=this.flexibleWidth;if(this.itemWidth===undefined||this.itemWidth===0&&!this.flexibleWidth){itemWidth=firstElement.outerWidth();}\nelse if(typeof this.itemWidth=='string'&&this.itemWidth.indexOf('%')>=0){itemWidth=parseFloat(this.itemWidth)/100*innerWidth;}\nif(flexibleWidth){if(typeof flexibleWidth=='string'&&flexibleWidth.indexOf('%')>=0){flexibleWidth=parseFloat(flexibleWidth)/100*innerWidth;}\nvar paddedInnerWidth=(innerWidth+this.offset),flexibleColumns=~~(0.5+paddedInnerWidth/(flexibleWidth+this.offset)),fixedColumns=~~(paddedInnerWidth/(itemWidth+this.offset)),columns=Math.max(flexibleColumns,fixedColumns),columnWidth=Math.min(flexibleWidth,~~((innerWidth-(columns-1)*this.offset)/columns));itemWidth=Math.max(itemWidth,columnWidth);this.handler.css('width',itemWidth);}\nreturn itemWidth;};Wookmark.prototype.layout=function(force){if(!this.container.is(':visible'))return;var columnWidth=this.getItemWidth()+this.offset,containerWidth=this.container.width(),innerWidth=containerWidth-2*this.outerOffset,columns=~~((innerWidth+this.offset)/columnWidth),offset=0,maxHeight=0,i=0,activeItems=this.getActiveItems(),activeItemsLength=activeItems.length,$item;if(this.itemHeightsDirty||!this.container.data('itemHeightsInitialized')){for(;i<activeItemsLength;i++){$item=activeItems.eq(i);$item.data('wookmark-height',$item.outerHeight());}\nthis.itemHeightsDirty=false;this.container.data('itemHeightsInitialized',true);}\ncolumns=Math.max(1,Math.min(columns,activeItemsLength));offset=this.outerOffset;if(this.align=='center'){offset+=~~(0.5+(innerWidth-(columns*columnWidth-this.offset))>>1);}\nthis.direction=this.direction||(this.align=='right'?'right':'left');if(!force&&this.columns!==null&&this.columns.length==columns&&this.activeItemCount==activeItemsLength){maxHeight=this.layoutColumns(columnWidth,offset);}else{maxHeight=this.layoutFull(columnWidth,columns,offset);}\nthis.activeItemCount=activeItemsLength;this.container.css('height',maxHeight);if(this.fillEmptySpace){this.refreshPlaceholders(columnWidth,offset);}\nif(this.onLayoutChanged!==undefined&&typeof this.onLayoutChanged==='function'){this.onLayoutChanged();}};Wookmark.prototype.sortElements=function(elements){return typeof(this.comparator)==='function'?elements.sort(this.comparator):elements;};Wookmark.prototype.layoutFull=function(columnWidth,columns,offset){var $item,i=0,k=0,activeItems=$.makeArray(this.getActiveItems()),length=activeItems.length,shortest=null,shortestIndex=null,sideOffset,heights=[],itemBulkCSS=[],leftAligned=this.align=='left'?true:false;this.columns=[];activeItems=this.sortElements(activeItems);while(heights.length<columns){heights.push(this.outerOffset);this.columns.push([]);}\nfor(;i<length;i++){$item=$(activeItems[i]);shortest=heights[0];shortestIndex=0;for(k=0;k<columns;k++){if(heights[k]<shortest){shortest=heights[k];shortestIndex=k;}}\n$item.data('wookmark-top',shortest);sideOffset=offset;if(shortestIndex>0||!leftAligned)\nsideOffset+=shortestIndex*columnWidth;(itemBulkCSS[i]={obj:$item,css:{position:'absolute',top:shortest}}).css[this.direction]=sideOffset;heights[shortestIndex]+=$item.data('wookmark-height')+this.verticalOffset;this.columns[shortestIndex].push($item);}\nbulkUpdateCSS(itemBulkCSS);return Math.max.apply(Math,heights);};Wookmark.prototype.layoutColumns=function(columnWidth,offset){var heights=[],itemBulkCSS=[],i=0,k=0,j=0,currentHeight,column,$item,itemData,sideOffset;for(;i<this.columns.length;i++){heights.push(this.outerOffset);column=this.columns[i];sideOffset=i*columnWidth+offset;currentHeight=heights[i];for(k=0;k<column.length;k++,j++){$item=column[k].data('wookmark-top',currentHeight);(itemBulkCSS[j]={obj:$item,css:{top:currentHeight}}).css[this.direction]=sideOffset;currentHeight+=$item.data('wookmark-height')+this.verticalOffset;}\nheights[i]=currentHeight;}\nbulkUpdateCSS(itemBulkCSS);return Math.max.apply(Math,heights);};Wookmark.prototype.clear=function(){clearTimeout(this.resizeTimer);$window.unbind('resize.wookmark',this.onResize);this.container.unbind('refreshWookmark',this.onRefresh);this.handler.wookmarkInstance=null;};return Wookmark;})();$.fn.wookmark=function(options){if(!this.wookmarkInstance){this.wookmarkInstance=new Wookmark(this,options||{});}else{this.wookmarkInstance.update(options||{});}\nthis.wookmarkInstance.layout(true);return this.show();};}));";
